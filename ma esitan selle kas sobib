import pygame
import sys
import json  # hetkel ei kasuta

pygame.init()

# aken
WIDTH, HEIGHT = 800, 600
screen = pygame.display.set_mode((WIDTH, HEIGHT))
pygame.display.set_caption("Point and Click Escape Room") 

# font –
FONT_SIZE = 24
font = pygame.font.SysFont(None, FONT_SIZE)

# taust - praegu lihtsalt ühtlane, hiljem saab pildi lisada
background = pygame.Surface((WIDTH, HEIGHT))
background.fill((30, 34, 40))

clock = pygame.time.Clock()

class Objekt:
    def __init__(self, objekti_nimi, rect, küsimus = None, valikud = None, vastus = None, osa_koodist = None):
        self.nimi = objekti_nimi
        self.rect = rect #asukoht
        self.küsimus = küsimus
        self.valikud = valikud
        self.vastus = vastus
        self.osa_koodist = osa_koodist
        self.klikitud = False

    def draw(self, ekraan):
        värv() if self.active else () #mingid värvid lisada
        pygame.draw.rect(ekraan, värv, self.rect)
        tekst = font.render(self.nimi, True, ())
        ekraan.blit(tekst, (self.rect.x, self.rect.y))

    def klikkimise_kontroll(self, pos):
        return self.rect.collidepoint(pos)

raamat = Objekt(
    objekti_nimi = "Raamat",
    rect = pygame.Rect(), #mingi asukoht siia
    küsimus = # mingi küsimus siia)
    valikud = []
    vastus = ""
    osa_koodist = "P"
)

objektid = [raamat] # praegu ainult 1, et põhiidee luua

klikitud_objekt = None
kogutud_kood = ""
sisestatud_vastus = ""

running = True
while running:
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            running = False
        
        elif event.type == pygame.MOUSEBUTTONDOWN:
            pos = event.pos
            klikitud_objekt = None
            for asi in objektid:
                if asi.klikkimise_kontroll(pos):
                    klikitud_objekt = asi
                    asi.klikitud = True
                else:
                    asi.klikitud = False

    # draw
    screen.blit(background, (0, 0))

    for asi in objektid:
        asi.draw(screen)

    if klikitud_objekt: #asukohad, suurused jne lisamisel
        küsimus = font.render(asi.küsimus, True, ())
        screen.blit(küsimus, ())
        if klikitud_objekt.valikud:
            for i, valik in enumerate(klikitud_objekt.valikud):
                valikud = font.render(f"{i + 1}. {valik}", True, ())
                screen.blit(valikud, ())
    
    # näidistekst, et fonti ka kasutataks
    text_surf = font.render("Kliki raamatul, et näha küsimust", True, ())
    screen.blit(text_surf, (20, 20))

    pygame.display.flip()
    clock.tick(60)  # kuni 60 kaadrit sekundis

pygame.quit()
sys.exit()

